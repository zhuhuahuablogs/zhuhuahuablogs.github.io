function loadImages(t,s){var h=0,i=0,o={};for(var e in t){i++;var n=new Image;o[e]=n,n.onload=function(){h++,h==i&&s&&s(o)},n.src=t[e]}}function d2a(t){return t*Math.PI/180}function a2d(t){return 180*t/Math.PI}function rnd(t,s){return Math.floor(Math.random()*(s-t)+t)}function Sprite(t){this.oImg=t,this.w=0,this.h=0,this.sx=0,this.sy=0,this.x=0,this.y=0,this.speed=0,this.rotate=0}function Fish(t,s){Sprite.call(this,t["fish"+s]),this.count=0,this.type=s;var h=[null,{h:55,w:37},{h:78,w:64},{h:72,w:56},{h:77,w:59},{h:107,w:122}];this.rotate=90,this.w=h[s].w,this.h=h[s].h}function Cannon(t,s){Sprite.call(this,t["cannon"+s]),this.type=s;var h=[null,{w:74,h:74},{w:74,h:76},{w:74,h:76},{w:74,h:83},{w:74,h:85},{w:74,h:90},{w:74,h:94}];this.w=h[s].w,this.h=h[s].h}function Bullet(t,s){Sprite.call(this,t),this.type=s;var h=[null,{sx:86,sy:0,w:24,h:26},{sx:61,sy:0,w:25,h:29},{sx:32,sy:35,w:27,h:31},{sx:30,sy:82,w:29,h:33},{sx:0,sy:82,w:30,h:34},{sx:30,sy:0,w:31,h:35},{sx:0,sy:0,w:30,h:44}];this.sx=h[s].sx,this.sy=h[s].sy,this.w=h[s].w,this.h=h[s].h}function Coin(t,s){switch(s){case 1:case 2:case 3:s=1;break;case 4:case 5:s=2}Sprite.call(this,t["coinAni"+s]);var h=[null,{w:60,h:60},{w:60,h:60}];this.w=h[s].w,this.h=h[s].h,this.type=s,this.count=0}function DieFish(t,s){Sprite.call(this,t["fish"+s]),this.count=0,this.type=s;var h=[null,{h:55,w:37},{h:78,w:64},{h:72,w:56},{h:77,w:59},{h:107,w:122}];this.rotate=90,this.w=h[s].w,this.h=h[s].h,this.sx=4*this.w}function Web(t,s){Sprite.call(this,t);var h=[null,{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200},{sx:22,sy:22,w:200,h:200}];this.sx=h[s].sx,this.sy=h[s].sy,this.w=h[s].w,this.h=h[s].h,this.type=s,this.scale=.5}Sprite.prototype.draw=function(t){t.save(),t.translate(this.x,this.y),t.rotate(d2a(this.rotate)),t.drawImage(this.oImg,this.sx,this.sy,this.w,this.h,-this.w/2,-this.h/2,this.w,this.h),t.restore()},Sprite.prototype.move=function(){var t=Math.cos(d2a(this.rotate-90))*this.speed,s=Math.sin(d2a(this.rotate-90))*this.speed;this.x+=t,this.y+=s},Sprite.prototype.collTest=function(t){var s=Math.min(this.w,this.h)/2,h=Math.min(t.w,t.h)/2,i=this.x-t.x,o=this.y-t.y,e=Math.sqrt(i*i+o*o);return e<=.5*(s+h)},Fish.prototype=new Sprite,Fish.prototype.constructor=Fish;var oldMove=Sprite.prototype.move;Fish.prototype.move=function(){oldMove.call(this),this.count%4==0&&(this.sx+=this.w,this.sx>=4*this.w&&(this.sx=0)),this.count++},Cannon.prototype=new Sprite,Cannon.prototype.constructor=Cannon,Bullet.prototype=new Sprite,Bullet.prototype.constructor=Bullet,Coin.prototype=new Sprite,Coin.prototype.constructor=Coin,Coin.prototype.move=function(){this.count%4==0&&(this.sy+=this.h,this.sy>=10*this.h&&(this.sy=0)),this.count++,this.x+=(0-this.x)/20,this.y+=(700-this.y)/20},DieFish.prototype=new Sprite,DieFish.prototype.constructor=DieFish,DieFish.prototype.move=function(){this.count%4==0&&(this.sx+=this.w,this.sx>=8*this.w&&(this.sx=4*this.w)),this.count++},Web.prototype=new Sprite,Web.prototype.constructor=Web,Web.prototype.draw=function(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale),t.drawImage(this.oImg,this.sx,this.sy,this.w,this.h,-this.w/2,-this.h/2,this.w,this.h),t.restore()};